let r=15;const canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d"),startBtn=document.getElementById("start"),msg=document.getElementById("message"),answer=document.getElementById("answer"),allNumbers=answer.childNodes,tries=document.getElementById("tries");let box=document.querySelectorAll("div.box");const ladybug=document.querySelector(".ladybug__background");let randomNumber;startBtn.addEventListener("click",resetGame);let clicks=3;function drawCircles(){randomNumber=getRandomNumber();let e=0,t=[];for(;t.length<randomNumber;){let{randomX:n,randomY:r}=randomCoordinates();class a{constructor(){this.x=n,this.y=r,this.r=15}}let s=!1,o=new a;for(let e=0;e<t.length;e++){let n=t[e];if(dist(n.x,n.y,o.x,o.y)<n.r+o.r){s=!0;break}}if(s||(t.push(o),ctx.beginPath(),ctx.arc(o.x,o.y,o.r,0,2*Math.PI),ctx.fillStyle="yellow",ctx.fill()),++e>5e3)break}}function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}function resetGame(){answer.addEventListener("click",compareResult),msg.classList.add("hidden"),tries.classList.remove("hidden"),ladybug.classList.remove("win"),clearCanvas(),clicks=3,tries.innerText=`Tries left: ${clicks}`,drawCircles(),removeClass()}function randomCoordinates(){const e=canvas.width,t=canvas.height;let n=Math.floor(Math.random()*e),a=Math.floor(Math.random()*t);return n<r&&(n+=r+1-n),n>e-r&&(n=-(r+1-n)),a<r&&(a+=r+1-a),a>t-r&&(a=-(r+1-a)),{randomX:n,randomY:a}}function getRandomNumber(){return randomNumber=Math.floor(10*Math.random()+1)}function compareResult(){const e=event.target;parseInt(e.innerHTML)!=randomNumber?(clicks--,msg.classList.remove("hidden"),tries.innerText=`Tries left: ${clicks}`,msg.innerHTML="Wrong! Try again!",0===clicks&&(msg.innerHTML="End game",answer.removeEventListener("click",compareResult))):(msg.classList.remove("hidden"),msg.innerHTML="Great!<br> Click on start button for a new game",tries.classList.add("hidden"),answer.removeEventListener("click",compareResult),startAnimation())}function startAnimation(){ladybug.classList.add("win"),animateDivs(),clearCanvas()}function animateDivs(){for(let e=0;e<box.length;e++)setTimeout(function(){box[e].classList.add("win")},50*e)}function removeClass(){for(let e=0;e<box.length;e++)box[e].classList.remove("win")}function dist(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}